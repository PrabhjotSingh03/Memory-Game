
    var library = {
      avengers: [
        'https://c4.wallpaperflare.com/wallpaper/293/952/22/iron-man-marvel-comics-superhero-the-avengers-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/719/640/12/marvel-comics-the-avengers-spider-man-avengers-infinity-war-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/625/108/1003/the-avengers-avengers-endgame-avengers-avengers-endgame-chris-hemsworth-hd-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/713/13/242/movies-marvel-cinematic-universe-marvel-comics-avengers-endgame-captain-america-hd-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/287/620/954/hulk-avengers-age-of-ultron-the-avengers-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/715/341/91/8k-elizabeth-olsen-avengers-infinity-war-wanda-maximoff-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/7/367/627/marvel-thor-ragnarok-tom-hiddleston-loki-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/755/464/37/the-film-scarlett-johansson-art-scarlett-johansson-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/340/197/235/doctor-strange-benedict-cumberbatch-marvel-comics-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/472/143/808/hawkeye-marvel-comics-the-avengers-jeremy-renner-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/293/952/22/iron-man-marvel-comics-superhero-the-avengers-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/719/640/12/marvel-comics-the-avengers-spider-man-avengers-infinity-war-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/625/108/1003/the-avengers-avengers-endgame-avengers-avengers-endgame-chris-hemsworth-hd-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/713/13/242/movies-marvel-cinematic-universe-marvel-comics-avengers-endgame-captain-america-hd-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/287/620/954/hulk-avengers-age-of-ultron-the-avengers-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/715/341/91/8k-elizabeth-olsen-avengers-infinity-war-wanda-maximoff-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/7/367/627/marvel-thor-ragnarok-tom-hiddleston-loki-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/755/464/37/the-film-scarlett-johansson-art-scarlett-johansson-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/340/197/235/doctor-strange-benedict-cumberbatch-marvel-comics-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/472/143/808/hawkeye-marvel-comics-the-avengers-jeremy-renner-wallpaper-preview.jpg'
      ],
      justiceleague: [
        'https://c4.wallpaperflare.com/wallpaper/599/329/255/justice-league-justice-league-2017-wonder-woman-gal-gadot-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/793/174/552/fiction-batman-costume-helmet-armor-hd-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/353/690/516/superman-batman-v-superman-dawn-of-justice-man-of-steel-dc-comics-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/598/608/62/jason-momoa-as-aquaman-4k-8k-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/935/385/89/movie-justice-league-barry-allen-ezra-miller-flash-hd-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/218/30/466/movie-justice-league-2017-cyborg-dc-comics-ray-fisher-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/49/742/527/injustice-injustice-2-darkseid-dc-comics-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/168/491/717/joker-the-dark-knight-heath-ledger-batman-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/535/637/101/black-adam-hd-superheroes-artwork-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/926/306/530/the-dark-knight-rises-bane-movies-messenjahmatt-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/599/329/255/justice-league-justice-league-2017-wonder-woman-gal-gadot-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/793/174/552/fiction-batman-costume-helmet-armor-hd-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/353/690/516/superman-batman-v-superman-dawn-of-justice-man-of-steel-dc-comics-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/598/608/62/jason-momoa-as-aquaman-4k-8k-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/935/385/89/movie-justice-league-barry-allen-ezra-miller-flash-hd-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/218/30/466/movie-justice-league-2017-cyborg-dc-comics-ray-fisher-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/49/742/527/injustice-injustice-2-darkseid-dc-comics-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/168/491/717/joker-the-dark-knight-heath-ledger-batman-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/535/637/101/black-adam-hd-superheroes-artwork-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/926/306/530/the-dark-knight-rises-bane-movies-messenjahmatt-wallpaper-preview.jpg'
      ],
      peakyblinders: [
        'https://c4.wallpaperflare.com/wallpaper/570/431/773/tv-show-peaky-blinders-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/615/546/503/tv-show-peaky-blinders-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/514/440/58/tv-show-peaky-blinders-wallpaper-preview.jpg',
        'https://images7.alphacoders.com/122/1226116.jpg',
        'https://images5.alphacoders.com/125/1254998.jpg',
        'https://rare-gallery.com/thumbnail/1345598-Peaky-Blinders-4k-Ultra-HD-Wallpaper.jpg',
        'https://rare-gallery.com/thumbnail/1345606-Peaky-Blinders-4k-Ultra-HD-Wallpaper.jpg',
        'https://wallpaperchain.com/download/peaky-blinders/peaky-blinders-wallpaper-13.jpg',
        'https://getwallpapers.com/wallpaper/full/b/7/6/1099040-peaky-blinders-wallpapers-2048x1152-for-iphone.jpg',
        'https://getwallpapers.com/wallpaper/full/1/4/d/1098995-download-free-peaky-blinders-wallpapers-1920x1080-1080p.jpg',
        'https://c4.wallpaperflare.com/wallpaper/570/431/773/tv-show-peaky-blinders-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/615/546/503/tv-show-peaky-blinders-wallpaper-preview.jpg',
        'https://c4.wallpaperflare.com/wallpaper/514/440/58/tv-show-peaky-blinders-wallpaper-preview.jpg',
        'https://images7.alphacoders.com/122/1226116.jpg',
        'https://images5.alphacoders.com/125/1254998.jpg',
        'https://rare-gallery.com/thumbnail/1345598-Peaky-Blinders-4k-Ultra-HD-Wallpaper.jpg',
        'https://rare-gallery.com/thumbnail/1345606-Peaky-Blinders-4k-Ultra-HD-Wallpaper.jpg',
        'https://wallpaperchain.com/download/peaky-blinders/peaky-blinders-wallpaper-13.jpg',
        'https://getwallpapers.com/wallpaper/full/b/7/6/1099040-peaky-blinders-wallpapers-2048x1152-for-iphone.jpg',
        'https://getwallpapers.com/wallpaper/full/1/4/d/1098995-download-free-peaky-blinders-wallpapers-1920x1080-1080p.jpg'
      ],
      harrypotter: [
        'https://res.cloudinary.com/beumsk/image/upload/v1547998926/memory/harrypotter/harry.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547998958/memory/harrypotter/ron.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547998992/memory/harrypotter/hermione.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999106/memory/harrypotter/dumbledore.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999032/memory/harrypotter/malfoy.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999143/memory/harrypotter/voldemort.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999401/memory/harrypotter/rogue.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999196/memory/harrypotter/hagrid.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999271/memory/harrypotter/sirius.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999577/memory/harrypotter/neville.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547998926/memory/harrypotter/harry.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547998958/memory/harrypotter/ron.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547998992/memory/harrypotter/hermione.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999106/memory/harrypotter/dumbledore.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999032/memory/harrypotter/malfoy.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999143/memory/harrypotter/voldemort.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999401/memory/harrypotter/rogue.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999196/memory/harrypotter/hagrid.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999271/memory/harrypotter/sirius.jpg',
        'https://res.cloudinary.com/beumsk/image/upload/v1547999577/memory/harrypotter/neville.jpg'
      ]
    };
    
    var images = [];
    var tempElt1 = "";
    var tempElt2 = "";
    var click = -1;
    var win = 0;
    var score = 0;
    var time = 0;
    var timer;

    var selection = document.getElementById("selection");
    var movies = document.getElementById("movies");
    var img = document.getElementsByClassName("img");
    var gameBoard = document.querySelector(".gameBoard");
    var gametime = document.getElementById("time");
    var gamescore = document.getElementById("score");
    var result = document.getElementById("result");
    var resultFinal = document.getElementById("resultFinal");
    var playAgain = document.getElementById("playAgain");
    
    movies.addEventListener("click", function (e) {
      if (e.target.classList.contains("movies")) {
        activateTheme(e.target.id);
        selection.classList.add("hidden");
        gameBoard.classList.remove("hidden");
      }
    });
    
    function activateTheme(theme) {
      for (let i = 0; i < 20; i++) {
        images.push(library[theme][i]);
      }
    
      for (let i = 0; i < 20; i++) {
        var rand = Math.floor(Math.random() * images.length);
        img[i].innerHTML = "<img src='" + images[rand] + "' alt='image' class='hidden'>";
        images.splice(rand, 1);
      }
    }
  
    gameBoard.addEventListener("click", gameLogic);
    
    function gameLogic(e) {
      if (e.target.classList.contains("flip")) {
        e.target.firstChild.classList.remove("hidden");
        if (click < 1) {
          if (click === -1) {
            timer = setInterval(function () {
              time++;
              gametime.innerHTML = time;
            }, 1000);
          }
          click = 1;
          tempElt1 = e.target; // Move assignment here to avoid issues
        } else if (e.target !== tempElt1) {
          tempElt2 = e.target;
          if (tempElt1.firstChild.src !== tempElt2.firstChild.src) {
            gameBoard.removeEventListener("click", gameLogic);
            setTimeout(function () {
              tempElt1.firstChild.classList.add("hidden");
              tempElt2.firstChild.classList.add("hidden");
              gameBoard.addEventListener("click", gameLogic);
            }, 400);
            if (score > 0) {
              score -= 2;
            }
            gamescore.innerHTML = score;
          } else {
            score += 10;
            win += 2;
            tempElt1.firstChild.classList.add("outline");
            tempElt2.firstChild.classList.add("outline");
            tempElt1.classList.remove("flip");
            tempElt2.classList.remove("flip");
            score.innerHTML = score;
    
            if (win === 20) {
              clearInterval(timer);
              resultFinal.innerHTML = "You won " + score + " points <br> in " + time + " seconds";
              result.classList.remove("hidden");
            }
          }
          click = 0;
        }
      }
    }
    
    playAgain.addEventListener("click", resetGame);
    
    function resetGame() {
      tempElt1 = "";
      tempElt2 = "";
      click = -1;
      win = 0;
      score = 0;
      time = 0;
      clearInterval(timer);
      result.classList.add("hidden");
      gameBoard.classList.add("hidden"); // Hide the main section
      selection.classList.remove("hidden"); // Show the selection menu
      for (let i = 0; i < 20; i++) {
        img[i].classList.add("flip");
        img[i].firstChild.classList.add("hidden");
      }
      gametime.textContent = time;
      gamescore.textContent = score; // Use scoreElement to update the score
    }
    
    
    
    